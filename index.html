<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Catálogo de Animes</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <main class="hero" id="hero">
    <h1>Descubra o anime ideal<br>para o seu gosto!</h1>

    <div class="search-box">
      <input 
        type="text"
        id="searchInput"
        placeholder="Digite o nome do anime..."
      >
      <button id="btn-filtros">Filtros</button>
    </div>

    <!-- FILTROS ATIVOS -->
    <div id="active-filters" class="active-filters" style="display:none;">
      <span id="filters-list"></span>
      <button id="clear-filters">Limpar</button>
    </div>
  </main>

  <!-- RESULTADOS -->
  <section class="catalog" id="catalog"></section>

  <!-- MODAL DE FILTROS -->
  <div class="modal" id="modal-filtros">
    <div class="modal-content">
      <h2>Selecione o gênero</h2>

      <div class="genres">
        <button data-genre="acao">Ação</button>
        <button data-genre="aventura">Aventura</button>
        <button data-genre="comedia">Comédia</button>
        <button data-genre="drama">Drama</button>
        <button data-genre="fantasia">Fantasia</button>
        <button data-genre="musica">Música</button>
        <button data-genre="romance">Romance</button>
        <button data-genre="ficcao-cientifica">Ficção Científica</button>
        <button data-genre="seinen">Seinen</button>
        <button data-genre="shoujo">Shoujo</button>
        <button data-genre="shounen">Shounen</button>
        <button data-genre="slice-of-life">Slice of Life</button>
        <button data-genre="esportes">Esportes</button>
        <button data-genre="sobrenatural">Sobrenatural</button>
        <button data-genre="suspense">Suspense</button>
      </div>

      <button class="close-modal">Fechar</button>
    </div>
  </div>

  <!-- BOTÃO VOLTAR AO TOPO -->
  <button id="btn-topo" title="Voltar ao topo">↑</button>

  <!-- MODAL DETALHES -->
  <div class="modal" id="modal-detalhes">
    <div class="modal-content modal-detalhes-content">
      <h2 id="detalhe-titulo"></h2>

      <div class="detalhes-body">
        <div class="detalhes-texto" id="detalhe-texto"></div>
        <div class="detalhes-imagem">
          <img id="detalhe-imagem" src="" alt="">
        </div>
      </div>

      <button class="close-modal" id="fechar-detalhes">Fechar</button>
    </div>
  </div>

  <!-- SCRIPT MODAL + FILTROS -->
  <script>
    const btnFiltros = document.getElementById("btn-filtros");
    const modal = document.getElementById("modal-filtros");
    const closeBtn = document.querySelector(".close-modal");
    const genreButtons = document.querySelectorAll(".genres button");

    const activeFiltersBox = document.getElementById("active-filters");
    const filtersList = document.getElementById("filters-list");
    const clearFiltersBtn = document.getElementById("clear-filters");

    var selectedGenres = [];

    btnFiltros.addEventListener("click", () => {
      modal.style.display = "flex";
    });

    closeBtn.addEventListener("click", () => {
      modal.style.display = "none";
    });

    modal.addEventListener("click", (e) => {
      if (e.target === modal) modal.style.display = "none";
    });

    function atualizarFiltrosAtivos() {
      if (selectedGenres.length === 0) {
        activeFiltersBox.style.display = "none";
        filtersList.textContent = "";
        return;
      }

      activeFiltersBox.style.display = "flex";
      filtersList.textContent = selectedGenres.join(", ");
    }

    genreButtons.forEach(button => {
      button.addEventListener("click", () => {
        const genre = button.dataset.genre;

        if (selectedGenres.includes(genre)) {
          selectedGenres = selectedGenres.filter(g => g !== genre);
          button.classList.remove("selected");
        } else {
          selectedGenres.push(genre);
          button.classList.add("selected");
        }

        atualizarFiltrosAtivos();
      });
    });

    clearFiltersBtn.addEventListener("click", () => {
      selectedGenres = [];
      genreButtons.forEach(btn => btn.classList.remove("selected"));
      atualizarFiltrosAtivos();
    });
  </script>

  <!-- SCRIPT DA API -->
  <script src="script.js"></script>

</body>
</html>
